package swt6.orm.domain;

import java.util.List;

import org.hibernate.criterion.Restrictions;

import swt6.orm.data.IDataProvider;
import swt6.orm.data.hibernate.HibernateDataProvider;
import swt6.orm.data.jpa.JPADataProvider;
import swt6.orm.domain.models.IEntity;
import swt6.orm.domain.models.LogbookEntry;
import swt6.orm.domain.models.Project;

public class JPAWorkLogManager extends WorkLogManager  {
	protected <T extends IEntity> IDataProvider<T> getDataProviderForType(){
		return new JPADataProvider<T>();
	}
   
    @Override
    public List<Project> getLeadingProjectsForEmployee(long employeeId) {
    	JPADataProvider<Project> dataProvider = (JPADataProvider<Project>) this.<Project>getDataProviderForType();
    	return dataProvider.getAllByRestriction(Project.class, Restrictions.eq("project.leader.id", employeeId));
    }

    @Override
    public List<LogbookEntry> getLogbookEntriesForEmployee(long employeeId) {
    	JPADataProvider<LogbookEntry> dataProvider = new JPADataProvider<LogbookEntry>();
    	return dataProvider.getAllByRestriction(LogbookEntry.class, "select l from LogbookEntry l where l.employee.id=:id");
    }
    
    @Override
    public List<LogbookEntry> getLogbookEntriesForPhase(String phase) {
    	JPADataProvider<LogbookEntry> dataProvider = new JPADataProvider<LogbookEntry>();
    	return dataProvider.getAllByRestriction(LogbookEntry.class, "select l from LogbookEntry l where l.employee.id=:id");
    }
}